#!/usr/bin/perl -w

use strict;
use File::Find;
use vars qw/*name *dir *prune/;
*name   = *File::Find::name;
*dir    = *File::Find::dir;
*prune  = *File::Find::prune;

sub wanted {
    return if (! -f $_);

    my $hasLicense = 0;
    open(FILE, $_);
    while (<FILE>) {
        if (/BEGIN LICENSE BLOCK/) {
            $hasLicense = 1;
            last;
        }
    }
    close(FILE);
    if (!$hasLicense) {
        print("$name\n");
    }
}

File::Find::find({wanted => \&wanted}, '.');
